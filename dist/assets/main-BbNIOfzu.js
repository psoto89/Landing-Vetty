import"./main-f3nSfiKp.js";function h(){const e=new URLSearchParams(window.location.search);return{source:e.get("utm_source")||"",medium:e.get("utm_medium")||"",campaign:e.get("utm_campaign")||"",content:e.get("utm_content")||"",term:e.get("utm_term")||"",full_url:window.location.href}}function v(){const e=document.getElementById("consultationForm");if(!e)return;const n=e.querySelector('input[name="phone"]'),d=document.getElementById("phoneError"),i=document.getElementById("emailInput"),m=document.getElementById("emailError");e.addEventListener("submit",async function(f){f.preventDefault();let o=!0;e.querySelectorAll("input, select").forEach(s=>s.classList.remove("border-red-500")),[d,m].forEach(s=>s.classList.add("hidden"));const u=n.value.replace(/\s/g,"");u.length<7&&(d.classList.remove("hidden"),n.classList.add("border-red-500"),o=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.value)||(m.classList.remove("hidden"),i.classList.add("border-red-500"),o=!1);const p=document.getElementById("terms");p&&!p.checked&&(o=!1,alert("Debes aceptar los Términos y Condiciones para continuar."));const r=document.getElementById("petTypeSelect"),a=document.getElementById("needTypeSelect"),l=r==null?void 0:r.value,c=a==null?void 0:a.value;if((!l||!c)&&(o=!1,!l&&r&&r.classList.add("border-red-500"),!c&&a&&a.classList.add("border-red-500")),o){const s=document.getElementById("phonePrefix").value,y={fullName:e.querySelector('input[name="fullName"]').value,phone:`${s} ${u}`,email:i.value,petType:l,needType:c,termsAccepted:!0,utms:h(),timestamp:new Date().toISOString(),source:"Vetty Landing Page"};try{const t=e.querySelector('button[type="submit"]'),g=t.innerHTML;if(t.innerHTML='<span class="animate-spin inline-block">⏳</span> Enviando...',t.disabled=!0,(await fetch("https://altotrafico-iav1-n8n.tmdjra.easypanel.host/webhook/Vetty%20Landing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok){window.location.href="/thank-you.html";return}else alert("Hubo un error. Por favor intenta de nuevo."),t.innerHTML=g,t.disabled=!1}catch(t){console.error("Error:",t),alert("Error de conexión. Por favor intenta de nuevo."),submitButton.innerHTML=originalText,submitButton.disabled=!1}}})}document.addEventListener("DOMContentLoaded",()=>{v();const e=document.getElementById("floatingCTA");if(e){let n=!1;window.addEventListener("scroll",()=>{n||(window.requestAnimationFrame(()=>{window.scrollY>200?e.classList.remove("translate-y-20","opacity-0","pointer-events-none"):e.classList.add("translate-y-20","opacity-0","pointer-events-none"),n=!1}),n=!0)})}});
